<!DOCTYPE html>
<html>
<head>
  	<div th:include="include/head"></div>
</head>
<head>
<title>従業員情報編集</title>
</head>
	<body>
 			<div th:include="include/header"></div>
 			<div class="container col-md-8 col-md-offset-2">
  	  				<div class="panel panel-primary">
	    					<div class="panel-heading">
	 	  							<h2 class="panel-title">従業員情報　編集フォーム</h2>
	    					</div>
	    					<div class="panel-body">
		  							<form id="realForm"  name="realForm" th:method="Post"  th:action="@{/master/employee/{employee_id}/edit(employee_id=${employee.employee_id})}"  th:object="${employee}">
		  									<div class="form-group col-xs-7">
			  										<label>従業員ID</label>
 	  		  										<input id="employee_id"  class="form-control"  th:field="${employee.employee_id}" name="employee_id"  readonly>
 		  									</div>
		    								<div class="form-group col-xs-7">
			  										<label>氏名</label>
 	  		  										<input id="employee_name" class="form-control" th:field="${employee.employee_name}" name="employee_name" type="text" required>
 		  									</div>
 		  									<div class="form-group col-xs-7">
			  										<label>氏名カナ</label>
 	  		  										<input id="employee_name_kana" th:field="${employee.employee_name_kana}" class="form-control" name="employee_name_kana" type="text" required>
 		  									</div>
 		  									<div class="form-group col-xs-7">
 		  											<label>性別</label>
		 		  									<div class="form-check checkbox-inline">
															<input class="form-check-input" type="radio" name="sex" id="inlineRadio1" value="0" th:field="${employee.sex}">
													  		<label class="form-check-label" for="inlineRadio1">男性</label>
													</div>
													<div class="form-check checkbox-inline">
															<input class="form-check-input" type="radio" name="sex" id="inlineRadio2" value="1" th:field="${employee.sex}">
													  		<label class="form-check-label" for="inlineRadio2">女性</label>
													</div>
											</div>
		  									<div class="form-group col-xs-7">
	 		  										<label>生年月日</label>
											 	  	<input id="birthday" class="form-control" type="date" name="birthday"  th:field="${employee.birthday}" required/>
		  									</div>
		  									<div class="form-group col-xs-7">
			  										<label>電話番号</label>
 	  		  										<input id="phone" class="form-control" name="phone"  type="text" th:field="${employee.phone}" required>
 		  									</div>
 		  									<div class="form-group col-xs-7">
			  										<label>郵便番号</label>
 	  		  										<input id="postal" class="form-control" name="postal"  type="text" th:field="${employee.postal}"  required>
 		  									</div>
 		  									<div class="form-group col-xs-7">
									 				<label>都道府県</label>
									 	  			<select id="prefecture" class="form-control" name="prefecture">
															<option th:each="prefecture:${prefectures}" th:value="${prefecture}"  th:field="${employee.prefecture}" th:text="${prefecture}">
											  		</select>
											</div>
											<div class="form-group col-xs-7">
			  										<label>住所１</label>
 	  		  										<input id="address1" class="form-control" name="address1"  type="text" th:field="${employee.address1}" required>
 		  									</div>
 		  									<div class="form-group col-xs-7">
			  										<label>住所２</label>
 	  		  										<input id="address2" class="form-control" name="address2" type="text" th:field="${employee.address2}" required>
 		  									</div>
 		  									<div class="form-group col-xs-7">
	 		  										<label>入社日</label>
											 	  	<input id="hire_date" class="form-control" type="date" name="hire_date"  th:field="${employee.hire_date}"  required/>
		  									</div>
		  									<div class="form-group col-xs-7">
	 		  										<label>退社日</label>
											 	  	<input id="quit_date" class="form-control" type="date" name="quit_date" th:field="${employee.quit_date}"  disabled/>
											 	  	<input id="quitFlgCheck"  class="form-check-input" type="checkbox"  value="option1">
													<label class="form-check-label" for="quitFlgCheck">退社日を登録する</label>
		  									</div>
										    <div class="col-xs-4 col-xs-offset-4">
										  			<button class="btn btn-primary col-xs-12 center-block" id="popup_btn">変更</button>
											</div>
	 	  							</form>
 	    					</div>
 	  				</div>
			</div>
			<div id="pass-popup" class="mfp-hide col-md-6 col-md-offset-3">
					<div class="panel panel-default">
	  						<div class="panel-heading">
									<b class="panel-title">変更情報の確認</b>
	  						</div>
	  						<div class="panel-body">
									<div>
		  									<div class="form-group">
													<label>従業員ID</label>
													<span id="employee_id_pop"></span>
		  									</div>
		  									<div class="form-group">
													<label>氏名</label>
													<span id="employee_name_pop"></span>
		  									</div>
		  									<div class="form-group">
													<label>氏名カナ</label>
													<span id="employee_name_kana_pop"></span>
		  									</div>
		  									<div class="form-group">
													<label>性別</label>
													<span id="sex_pop"></span>
		  									</div>
		  									<div class="form-group">
													<label>生年月日</label>
													<span id="birthday_pop"></span>
		  									</div>
		  									<div class="form-group">
													<label>電話番号</label>
													<span id="phone_pop"></span>
		  									</div>
		  									<div class="form-group">
													<label>郵便番号</label>
													<span id="postal_pop"></span>
		  									</div>
		  									<div class="form-group">
													<label>都道府県</label>
													<span id="prefecture_pop"></span>
		  									</div>
		  									<div class="form-group">
													<label>住所１</label>
													<span id="address1_pop"></span>
		  									</div>
		  									<div class="form-group">
													<label>住所２</label>
													<span id="address2_pop"></span>
		  									</div>
		  									<div class="form-group">
													<label>入社日</label>
													<span id="hire_date_pop"></span>
		  									</div>
		  									<div class="form-group">
													<label>退社日</label>
													<span id="quit_date_pop"></span>
		  									</div>
		  									
		    								<button class="btn" id="realFormSubmit">変更</button>
									</div>
	  						</div>
					</div>
  			</div>
			<script>
					$(function(){
		
							$(document).on('change', '#quitFlgCheck', function(){
					        		if($("#quit_date").prop('disabled')){
					        				$("#quit_date").prop('disabled', false);
					        		} else {
					        			$("#quit_date").prop('disabled', true);
					        		}
					    	});

							$('#popup_btn').click(function() {
								$("#realForm").submit( function(e) {
									
									$("#employee_id_pop").html($("#employee_id").val());
									$("#employee_name_pop").html($("#employee_name").val());
									$("#employee_name_kana_pop").html($("#employee_name_kana").val());
									var sexInt = $('input[name=sex]:checked').val();
									var sexStr = null;
									if(sexInt == 0){
										sexStr = '男性';
									} else if (sexInt == 1){
										sexStr = '女性';
									}
									$("#sex_pop").html(sexStr);
									$("#birthday_pop").html($("#birthday").val());
									$("#phone_pop").html($("#phone").val());
									$("#postal_pop").html($("#postal").val());
									$("#prefecture_pop").html($("#prefecture option:selected").val());
									$("#address1_pop").html($("#address1").val());
									$("#address2_pop").html($("#address2").val());
									$("#hire_date_pop").html($("#hire_date").val());
									$("#quit_date_pop").html($("#quit_date").val());
									
							    	$.magnificPopup.open({
							    		  items: {
							    		    src: '#pass-popup'
							    		  },
							    		  type: 'inline'
							    	});
									return false;

							});
							
							$('#realFormSubmit').click(function() {
								document.realForm.submit();
							});

							});
					});
			</script>
 	</body>
 </html>